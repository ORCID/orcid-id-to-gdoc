<div class="container">
    <div class="row">
        <div class="col">
            <form 
                #formRef="ngForm" 
                (ngSubmit)="submitForm(formRef.value)" 
                novalidate
            >
                <fieldset>
                    <legend class="font-weight-bold text-center">iD Collection Details</legend>
                    <p>This information is displayed on your collection page. Use these fields to let users know why you're collecting their iDs and what you plan to do with them. Sorry, plain text only! (no links or other HTML)</p>

                    <div class="form-group" >
                        <label class="form-control-label font-weight-bold" for="title">Title</label>
                        <input 
                            [(ngModel)]="title"
                            #titleRef="ngModel" 
                            autocomplete="off"
                            class="form-control" 
                            id="title" 
                            name="title" 
                            placeholder="Write the collection title here..." 
                            type="text" 
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-control-label font-weight-bold" for="description">Description</label>
                        <textarea
                            [(ngModel)]="description"
                            #descriptionRef="ngModel" 
                            class="form-control" 
                            id="description" 
                            name="description" 
                            placeholder="Write the collection description here..." 
                            required
                            rows="5"
                        ></textarea> 
                    </div>
                    <div
                        *ngIf="username || orcid" 
                        class="form-group"
                    >
                        <p class="form-control-label font-weight-bold">
                            Created by
                        </p>
                        <p><span *ngIf="username">{{username}}, </span><a href="{{fullOrcidId}}" target="_blank">{{orcid}}</a></p>
                    </div>
                    <div class="form-group">
                        <p>
                        
                            <button 
                                [disabled]="!formRef.valid"
                                class="btn btn-primary" 
                                type="submit" 
                                role="button"
                            >
                                Save Details
                            </button>
                        </p>
                        <p (click)="showErrorMessage = !showErrorMessage" *ngIf="showErrorMessage && formRef.valid" class="text-danger"><strong>Oh snap!</strong> Try submitting again.</p>
                        <p (click)="showSuccessMessage = !showSuccessMessage" *ngIf="showSuccessMessage && formRef.valid" class="text-success"><strong>Well done!</strong> You successfully saved the collection.</p>
                        <p (click)="showWarningMessage = !showWarningMessage" *ngIf="!formRef.valid && (formSubmitted || !formEmptyOnLoad)" class="text-warning"><strong>Please fill out the title and description.</strong></p>                           
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
    <div 
        *ngIf="formSubmitted || !formEmptyOnLoad"
        class="row"
    >
        <div class="col">
            <div class="card">
                <div class="card-block">
                    <h2>Collection Links <small>Hold onto these!</small></h2>
                    <div id="collection-links">
                        <h3>Administration Link</h3>
                        <p>Use this link to edit collection details:</p>
                        <p><a href="{{windowLocationOrigin}}/{{publicKey}}/edit/{{privateKey}}">{{windowLocationOrigin}}/{{publicKey}}/edit/{{privateKey}} </a></p>
                        <h3>Share Link</h3>
                        <p>Share this link with anyone whose iD you want to collect, or display this page on a laptop/tablet at your event:</p>
                        <p><a href="{{windowLocationOrigin}}/{{publicKey}}" target="_{{publicKey}}">{{windowLocationOrigin}}/{{publicKey}} <fa name="external-link-square"></fa></a></p>
                    </div>
                    <button (click)="copyLinks()" class="btn btn-primary" ><fa  name="clipboard"></fa> Copy</button><div *ngIf="showLinksCopied" class="text-success">Links copied!</div>
                </div>
            </div>
        </div>
    </div>
</div>